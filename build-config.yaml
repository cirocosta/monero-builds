apiVersion: kbld.k14s.io/v1alpha1
kind: Config
sources:
- image: utxobr/monero:master
  path: monero
  docker:
    build:
      rawOptions:
      - --build-arg=RUST_IMAGE=index.docker.io/library/rust:1.55.0-bullseye@sha256:81428aaedcfa28385c2bfd7e37d3e8f146b70f52526ef229ad94f50cf6bc7938
      - --build-arg=DEBIAN_IMAGE=index.docker.io/library/debian:bullseye@sha256:2c22645bfe97aa1ed1c930adf5970fee3454f9a42a19214051ec677cba805712
      - --build-arg=DISTROLESS_IMAGE=gcr.io/distroless/base-debian11:nonroot@sha256:21a86d92771aa0ee8fc238e94f1a3a5fbb2c0ad55adda8ad626a6dd1e7faaa8f
      - --build-arg=NPROC=12
      - --build-arg=MONERO_REPOSITORY=https://github.com/monero-project/monero
      - --build-arg=MONERO_REVISION=b58a9fb12e6438aee854cdfab8a6208ea22f6391
- image: utxobr/monero:p2pool-api-v0.17
  path: monero
  docker:
    build:
      rawOptions:
      - --build-arg=RUST_IMAGE=index.docker.io/library/rust:1.55.0-bullseye@sha256:81428aaedcfa28385c2bfd7e37d3e8f146b70f52526ef229ad94f50cf6bc7938
      - --build-arg=DEBIAN_IMAGE=index.docker.io/library/debian:bullseye@sha256:2c22645bfe97aa1ed1c930adf5970fee3454f9a42a19214051ec677cba805712
      - --build-arg=DISTROLESS_IMAGE=gcr.io/distroless/base-debian11:nonroot@sha256:21a86d92771aa0ee8fc238e94f1a3a5fbb2c0ad55adda8ad626a6dd1e7faaa8f
      - --build-arg=NPROC=12
      - --build-arg=MONERO_REPOSITORY=https://github.com/SChernykh/monero
      - --build-arg=MONERO_REVISION=7dbb0d1fc942292363483a8ef117859f66c21bee
- image: utxobr/p2pool:master
  path: p2pool
  docker:
    build:
      rawOptions:
      - --build-arg=RUST_IMAGE=index.docker.io/library/rust:1.55.0-bullseye@sha256:81428aaedcfa28385c2bfd7e37d3e8f146b70f52526ef229ad94f50cf6bc7938
      - --build-arg=DEBIAN_IMAGE=index.docker.io/library/debian:bullseye@sha256:2c22645bfe97aa1ed1c930adf5970fee3454f9a42a19214051ec677cba805712
      - --build-arg=DISTROLESS_IMAGE=gcr.io/distroless/base-debian11:nonroot@sha256:21a86d92771aa0ee8fc238e94f1a3a5fbb2c0ad55adda8ad626a6dd1e7faaa8f
      - --build-arg=NPROC=12
      - --build-arg=P2POOL_REPOSITORY=https://github.com/SChernykh/p2pool
      - --build-arg=P2POOL_REVISION=af2a8eeb088e64bf9601891531919a634653064f
- image: utxobr/xmr-btc-swap:master
  path: xmr-btc-swap
  docker:
    build:
      rawOptions:
      - --build-arg=RUST_IMAGE=index.docker.io/library/rust:1.55.0-bullseye@sha256:81428aaedcfa28385c2bfd7e37d3e8f146b70f52526ef229ad94f50cf6bc7938
      - --build-arg=DEBIAN_IMAGE=index.docker.io/library/debian:bullseye@sha256:2c22645bfe97aa1ed1c930adf5970fee3454f9a42a19214051ec677cba805712
      - --build-arg=DISTROLESS_IMAGE=gcr.io/distroless/base-debian11:nonroot@sha256:21a86d92771aa0ee8fc238e94f1a3a5fbb2c0ad55adda8ad626a6dd1e7faaa8f
      - --build-arg=NPROC=12
      - --build-arg=XMRBTCSWAP_REPOSITORY=https://github.com/comit-network/xmr-btc-swap
      - --build-arg=XMRBTCSWAP_REVISION=90bf702b991abae7bc18fd3319843e1bb87b186d
- image: utxobr/electrs:master
  path: electrs
  docker:
    build:
      rawOptions:
      - --build-arg=RUST_IMAGE=index.docker.io/library/rust:1.55.0-bullseye@sha256:81428aaedcfa28385c2bfd7e37d3e8f146b70f52526ef229ad94f50cf6bc7938
      - --build-arg=DEBIAN_IMAGE=index.docker.io/library/debian:bullseye@sha256:2c22645bfe97aa1ed1c930adf5970fee3454f9a42a19214051ec677cba805712
      - --build-arg=DISTROLESS_IMAGE=gcr.io/distroless/base-debian11:nonroot@sha256:21a86d92771aa0ee8fc238e94f1a3a5fbb2c0ad55adda8ad626a6dd1e7faaa8f
      - --build-arg=NPROC=12
      - --build-arg=ELECTRS_REPOSITORY=https://github.com/romanz/electrs
      - --build-arg=ELECTRS_REVISION=2ea514373e4198238ea81a40cebe4652e496f5b6
- image: utxobr/bitcoin:master
  path: bitcoin
  docker:
    build:
      rawOptions:
      - --build-arg=RUST_IMAGE=index.docker.io/library/rust:1.55.0-bullseye@sha256:81428aaedcfa28385c2bfd7e37d3e8f146b70f52526ef229ad94f50cf6bc7938
      - --build-arg=DEBIAN_IMAGE=index.docker.io/library/debian:bullseye@sha256:2c22645bfe97aa1ed1c930adf5970fee3454f9a42a19214051ec677cba805712
      - --build-arg=DISTROLESS_IMAGE=gcr.io/distroless/base-debian11:nonroot@sha256:21a86d92771aa0ee8fc238e94f1a3a5fbb2c0ad55adda8ad626a6dd1e7faaa8f
      - --build-arg=NPROC=12
      - --build-arg=BITCOIN_REPOSITORY=https://github.com/bitcoin/bitcoin
      - --build-arg=BITCOIN_REVISION=991753e4d50ea5c973f4d3330e5afba797b1b1e7
destinations:
- image: utxobr/monero:master
  newImage: utxobr/monero
  tags:
  - master
- image: utxobr/monero:p2pool-api-v0.17
  newImage: utxobr/monero
  tags:
  - p2pool-api-v0.17
- image: utxobr/p2pool:master
  newImage: utxobr/p2pool
  tags:
  - master
- image: utxobr/xmr-btc-swap:master
  newImage: utxobr/xmr-btc-swap
  tags:
  - master
- image: utxobr/electrs:master
  newImage: utxobr/electrs
  tags:
  - master
- image: utxobr/bitcoin:master
  newImage: utxobr/bitcoin
  tags:
  - master
---
images:
- image: utxobr/monero:master
  description: |-
    whatever latest commit is there on monero's
    `master` branch.
  args:
  - --build-arg=RUST_IMAGE=index.docker.io/library/rust:1.55.0-bullseye@sha256:81428aaedcfa28385c2bfd7e37d3e8f146b70f52526ef229ad94f50cf6bc7938
  - --build-arg=DEBIAN_IMAGE=index.docker.io/library/debian:bullseye@sha256:2c22645bfe97aa1ed1c930adf5970fee3454f9a42a19214051ec677cba805712
  - --build-arg=DISTROLESS_IMAGE=gcr.io/distroless/base-debian11:nonroot@sha256:21a86d92771aa0ee8fc238e94f1a3a5fbb2c0ad55adda8ad626a6dd1e7faaa8f
  - --build-arg=NPROC=12
  - --build-arg=MONERO_REPOSITORY=https://github.com/monero-project/monero
  - --build-arg=MONERO_REVISION=b58a9fb12e6438aee854cdfab8a6208ea22f6391
  tags:
  - master
- image: utxobr/monero:p2pool-api-v0.17
  description: |-
    latest commits to the p2pool's temporary
    fork of monero based on the v0.17 release
    branch
  args:
  - --build-arg=RUST_IMAGE=index.docker.io/library/rust:1.55.0-bullseye@sha256:81428aaedcfa28385c2bfd7e37d3e8f146b70f52526ef229ad94f50cf6bc7938
  - --build-arg=DEBIAN_IMAGE=index.docker.io/library/debian:bullseye@sha256:2c22645bfe97aa1ed1c930adf5970fee3454f9a42a19214051ec677cba805712
  - --build-arg=DISTROLESS_IMAGE=gcr.io/distroless/base-debian11:nonroot@sha256:21a86d92771aa0ee8fc238e94f1a3a5fbb2c0ad55adda8ad626a6dd1e7faaa8f
  - --build-arg=NPROC=12
  - --build-arg=MONERO_REPOSITORY=https://github.com/SChernykh/monero
  - --build-arg=MONERO_REVISION=7dbb0d1fc942292363483a8ef117859f66c21bee
  tags:
  - p2pool-api-v0.17
- image: utxobr/p2pool:master
  description: |-
    p2p binary builds from latest commits of
    master branch of p2pool
  args:
  - --build-arg=RUST_IMAGE=index.docker.io/library/rust:1.55.0-bullseye@sha256:81428aaedcfa28385c2bfd7e37d3e8f146b70f52526ef229ad94f50cf6bc7938
  - --build-arg=DEBIAN_IMAGE=index.docker.io/library/debian:bullseye@sha256:2c22645bfe97aa1ed1c930adf5970fee3454f9a42a19214051ec677cba805712
  - --build-arg=DISTROLESS_IMAGE=gcr.io/distroless/base-debian11:nonroot@sha256:21a86d92771aa0ee8fc238e94f1a3a5fbb2c0ad55adda8ad626a6dd1e7faaa8f
  - --build-arg=NPROC=12
  - --build-arg=P2POOL_REPOSITORY=https://github.com/SChernykh/p2pool
  - --build-arg=P2POOL_REVISION=af2a8eeb088e64bf9601891531919a634653064f
  tags:
  - master
- image: utxobr/xmr-btc-swap:master
  description: |-
    asb, swap, and kraken_ticker binary builds
    from comit-network's master branch
  args:
  - --build-arg=RUST_IMAGE=index.docker.io/library/rust:1.55.0-bullseye@sha256:81428aaedcfa28385c2bfd7e37d3e8f146b70f52526ef229ad94f50cf6bc7938
  - --build-arg=DEBIAN_IMAGE=index.docker.io/library/debian:bullseye@sha256:2c22645bfe97aa1ed1c930adf5970fee3454f9a42a19214051ec677cba805712
  - --build-arg=DISTROLESS_IMAGE=gcr.io/distroless/base-debian11:nonroot@sha256:21a86d92771aa0ee8fc238e94f1a3a5fbb2c0ad55adda8ad626a6dd1e7faaa8f
  - --build-arg=NPROC=12
  - --build-arg=XMRBTCSWAP_REPOSITORY=https://github.com/comit-network/xmr-btc-swap
  - --build-arg=XMRBTCSWAP_REVISION=90bf702b991abae7bc18fd3319843e1bb87b186d
  tags:
  - master
- image: utxobr/electrs:master
  description: electrs build from romanz' master branch
  args:
  - --build-arg=RUST_IMAGE=index.docker.io/library/rust:1.55.0-bullseye@sha256:81428aaedcfa28385c2bfd7e37d3e8f146b70f52526ef229ad94f50cf6bc7938
  - --build-arg=DEBIAN_IMAGE=index.docker.io/library/debian:bullseye@sha256:2c22645bfe97aa1ed1c930adf5970fee3454f9a42a19214051ec677cba805712
  - --build-arg=DISTROLESS_IMAGE=gcr.io/distroless/base-debian11:nonroot@sha256:21a86d92771aa0ee8fc238e94f1a3a5fbb2c0ad55adda8ad626a6dd1e7faaa8f
  - --build-arg=NPROC=12
  - --build-arg=ELECTRS_REPOSITORY=https://github.com/romanz/electrs
  - --build-arg=ELECTRS_REVISION=2ea514373e4198238ea81a40cebe4652e496f5b6
  tags:
  - master
- image: utxobr/bitcoin:master
  description: |-
    bitcoind, bitcoin-cli, bitcoin-tx, and
    bitcoin-util from `master` branch.
  args:
  - --build-arg=RUST_IMAGE=index.docker.io/library/rust:1.55.0-bullseye@sha256:81428aaedcfa28385c2bfd7e37d3e8f146b70f52526ef229ad94f50cf6bc7938
  - --build-arg=DEBIAN_IMAGE=index.docker.io/library/debian:bullseye@sha256:2c22645bfe97aa1ed1c930adf5970fee3454f9a42a19214051ec677cba805712
  - --build-arg=DISTROLESS_IMAGE=gcr.io/distroless/base-debian11:nonroot@sha256:21a86d92771aa0ee8fc238e94f1a3a5fbb2c0ad55adda8ad626a6dd1e7faaa8f
  - --build-arg=NPROC=12
  - --build-arg=BITCOIN_REPOSITORY=https://github.com/bitcoin/bitcoin
  - --build-arg=BITCOIN_REVISION=991753e4d50ea5c973f4d3330e5afba797b1b1e7
  tags:
  - master
